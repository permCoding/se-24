:toc:
:toclevels: 2
:toc: preamble

= Простое серверное приложение

Серверное приложение запускается на стороне сервера и ждёт от клиента запрос. Приложение крутится в бесконечном цикле - ждёт запроса, после получения обрабатывает его и посылает соответсвующий ответ клиенту в виде **htlm-страницы**, **json-файла** и т.п.


== API

Программный интерфейс приложения - совокупность правил (видов запросов), выполненных по стандарту, которые это приложение поддерживает.

Например:

- GET-запрос - позволяет получить что-то от сервера
- POST-запрос - позволяет передать что-то на сервер

Запрос выглядит просто как строка - http-адрес.
В строке адреса можно передать дополнительные параметры, например:  

```js
http://localhost:3000/getByNumber?number=23  
http://localhost:3000/sortBy?direct=desc  
http://localhost:3000/sortBy?field=id&direct=asc  

```

== Создаём справочник

- Пользователь посылает запрос через адресную строку браузера.  
- Приложение выводит на экран html-страницу.  
- Данные хранятся в json-файле.  
- Будем делать только GET-запросы (json-файл пользователь не будет менять).  

---  

=== Формат json

Объект, массив, как прочитать, как отобразить.  

=== http, https, express

Создание сервера и обработка событий.  
Как остановить сервер.  
mimeTypes.  

=== html

Приём запроса, обаботка, ответ.  
Чтение html, адаптация html, отправка клиенту.  

=== ico

Браузер автоматически делает дополнительный запрос на иконку, кроме собственно запроса пользователя.  
Поэтому добавим в приложение обработку запроса на загрузку иконки.  

== Обсудим задание на Курсовой проект

...  

...  

---  

В Node.js `__dirname` — это специальная глобальная переменная, которая содержит абсолютный путь к директории, в которой находится текущий исполняемый файл. Использование `path.join(__dirname, 'public', 'favicon.ico')` имеет несколько важных преимуществ по сравнению с относительным путем `"./public/favicon.ico"`:

1. **Абсолютный путь**: Использование `__dirname` помогает гарантировать, что вы всегда используете абсолютный путь к файлу. Это минимизирует возможность ошибки, связанной с изменением рабочего каталога при выполнении приложения.

2. **Надежность**: Если вы запускаете ваш Node.js скрипт из другой директории (например, если вы используете скрипт из терминала находясь в совершенно другом каталоге), относительный путь может не найти файл, если он не соответствует текущему рабочему каталогу. С использованием `__dirname` вы всегда ссылаетесь на правильное местоположение файла.

3. **Кросс-платформенность**: Метод `path.join` автоматически обрабатывает различия в разделителях путей между операционными системами (например, `/` для Unix-подобных систем и `\` для Windows). Это делает код более переносимым.

4. **Сложные структуры директорий**: В более сложных проектах, где структура директорий может меняться или иметь вложенные директории, использование `__dirname` и `path.join` упрощает управление путями, что снижает вероятность ошибок.

Поэтому лучшей практикой является использование `path.join(__dirname, ...)` для определения путей к файлам в Node.js, особенно когда дело касается статических файлов или ресурсов вашего приложения.

---  
