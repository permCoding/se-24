# Promise

## Обработка данных / Promise  

### Задания для лабораторной работы  

> Реализовать задания с помощью: 
> - библиотеки  **request**  
> - и класса **Promise**  

> пример с request + Promise есть в текущей папке и в Лекции  

---  

#### => task01 Обработать файл users.json - получить, преобразовать, сохранить  

Данные находятся по адресу: http://files-pcoding.1gb.ru/json?filename=users.json  

**Задание:**  

1. получить из url-адреса массив объектов  

2. преобразовать (упростить) объекты, выбрав только поля id, name, phone, city:  

```js
{
    "id": 1,
    "name": "Leanne Graham",
    "phone": 1-222-333,
    "city": "London"
}
```

3. отсортировать массив обновлённых объектов по полю name  

4. сохранить полученный массив в виде json-файла в текущей папке  

---  

#### => task02 Обработать json-данные, собранные с wb  

Кто-то написал парсер данных с сайта WB, Вам нужно обработать полученные ранее данные. Данные находятся по адресам:  

- http://files-pcoding.1gb.ru/json?filename=wb_laptops_popular.json  

- http://files-pcoding.1gb.ru/json?filename=wb_laptops_pricedown.json  

Это списки ноутбуков с WB (ноябрь 2023), отсортированные по убыванию популярности и цены.  

Если Вам нужно ознакомиться со структурой объектов, то можно вывести не весь массив, а ограниченное количество (добавив параметр **limit**), например, так:  

- http://files-pcoding.1gb.ru/json?filename=wb_laptops_popular.json&limit=1  

**Задание:**  

1. получить данные из одного url-адреса  
2. получить данные из второго url-адреса  
3. выявить список товаров, которые есть **в обоих списках**  
4. сформировать массив объектов, в который попадут только выбранные товары  
5. сохранить массив объектов в выходной json-файл  

---  

#### => task03 Загрузить json, обработать и сохранить в csv  

Кто-то написал парсер данных с сайта WB, Вам нужно обработать полученные ранее данные. Данные находятся по адресу:  

- http://files-pcoding.1gb.ru/json?filename=wb_laptops_popular.json  

**Задание:**  

Написать **функцию**, которая:  

1. на вход получает название бренда (например, lenovo)  
2. загружает данные из url-адреса  
3. фильтрует список товаров по бренду  
4. формирует массив объектов, выбирая только такие, которые в качестве типа накопителя содержат SSD-диск  
5. далее упрощает объекты, оставляя только такие поля:  

> название  
> бренд  
> текущая цена продажи  
> диагональ экрана  
> разрешение экрана  
> объём оперативной памяти  
> объём SSD  
> тип матрицы  

6. сортирует объекты по возрастанию цены  
7. сохраняет массив объектов в выходной csv-файл с соответсвующими заголовками (в качестве разделителя выбрать символ ';')  

Для удобства отдельные подзадачи функции можете оформить в виде самостоятельных функций (например, сохранение массива объектов в csv-файл, упрощение обекта, загрузка из url-адреса).  

---  

Обратите внимание - этот шаблон для текстового файла, вам же нужно извлекать не строки, а массив json, поэтому функцию целесообразно переименовать и настроить на json:  

```js
const request = require('request') // npm i request

const get_lines_from_url = (url) => {
    return new Promise((resolve, reject) => {
        request.get(url, (error, response, data) => {
            if (error) reject(error)
            resolve(data.split("\n"))
        })
    })
}

const processData = async (url) => {
    lines = await get_lines_from_url(url)
    // тут решение
    console.log(lines)
}

url = "https://pcoding.ru/txt/labrab04-1.txt"
processData(url)
```

